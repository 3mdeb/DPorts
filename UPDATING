This file documents some of the problems you may encounter when upgrading
your ports.  We try our best to minimize these disruptions, but sometimes
they are unavoidable.

You should get into the habit of checking this file for changes each time
you update your ports collection, before attempting any port upgrades.

20210801:
  AFFECTS: users of www/py-pyjwt
  AUTHOR: rhurlin@FreeBSD.org

  To make it possible to easily import py-pyjwt v2.x the current port was
  moved to a versioned directory.

  If you use portmaster:
        portmaster -o www/py-pyjwt1 www/py-pyjwt
  If you use portupgrade:
        portupgrade -fo www/py-pyjwt1 www/py-pyjwt
  If you use pkg with binary packages:
        pkg set -o www/py-pyjwt:www/py-pyjwt1

20210912:
  AFFECTS: x11-wm/cage, x11-wm/hikari, x11-wm/labwc, x11-wm/sway, x11-wm/wayfire
  AUTHOR: jbeich@FreeBSD.org

  SUID option has been removed in favor of seatd-launch(1) which doesn't
  require special handling in every consumer and doesn't bypass group
  permissions. If you've already enabled seatd service or use consolekit2
  then nothing changes. Otherwise,

    $ sway
    00:00:00.001 [ERROR] [wlr] [libseat] [libseat/libseat.c:83] No backend was able to open a seat
    00:00:00.001 [ERROR] [wlr] [backend/session/session.c:84] Unable to create seat: Function not implemented
    00:00:00.001 [ERROR] [wlr] [backend/session/session.c:218] Failed to load session backend
    00:00:00.001 [ERROR] [wlr] [backend/backend.c:353] Failed to start a DRM session
    00:00:00.001 [ERROR] [sway/server.c:53] Unable to create backend

  can be fixed by

    $ ck-launch-session sway

  or

    $ seatd-launch sway

  or

    # sysrc seatd_enable=YES
    # service seatd start
    $ sway

  Replace "sway" with your compositor e.g., "cage", "hikari", "labwc", "wayfire".

20210907:
  AFFECTS: consumers of math/eigen[23]
  AUTHOR: adridg@FreeBSD.org

  math/eigen2 has been marked deprecated. There do not seem to be any
  consumers in FreeBSD ports.

  math/eigen3 has had its options re-vamped. The default options previously
  pulled in multiple useless library dependencies. The options also forced
  a specific BLAS implementation. The new options depend only on the
  default BLAS (whatever USES=blaslapack picks), but this can be turned
  off. The previous multiple useless libraries -- which are not useless
  when running the tests in Eigen -- are now hidden behind the default-off
  TEST option.

  Users of a carefully-tuned Eigen build should re-evaluate the options
  available.

20210902:
  AFFECTS: users of editors/vim
  AUTHOR: adamw@FreeBSD.org

  The vim ports have been completely reworked to take advantage of flavors.

  The biggest change is that the `vim' package is now console-only. If
  you want the GTk3 GUI, you'll need to install the `vim-gtk3' package
  instead. All the GUI toolkits have their own package now: vim-gtk3,
  vim-gtk2, -athena, -motif, and -x11. The vim-tiny package still exists.

  Also: only python3 bindings are included now. There are very few plugins
  written in Perl or Ruby, so there really wasn't a need to bundle those
  languages with Vim. They still exist as OPTIONS, so you can still enable
  them if you'd like. Also, support for py27 has been dropped.

20210901:
  AFFECTS: users of audio/ampache
  AUTHOR: crees@FreeBSD.org

  With the upgrade to Ampache 5.0.0, the root Ampache folder has changed
  to %%WWWDIR%%/ampache/public.  Please update your web server aliases,
  for example if you use Apache, then in httpd.conf make sure the lines
  look like this:

  Alias /ampache /usr/local/www/ampache/public

  <Directory "/usr/local/www/ampache/public">

  If you have customised your .htaccess files to allow for a different
  alias, you'll need to move them to the new location after upgrading:

  # sh -c 'cd /usr/local/www/ampache && for f in */.htaccess; do mv $f public/$f; done'

  More upgrade notes can be found on Github:

  https://github.com/ampache/ampache/releases/tag/5.0.0

20210823:
  AFFECTS: users of mail/mu
  AUTHOR: hrs@FreeBSD.org

  mail/mu now uses XDG Base Directory Specification for the default
  locations for various files.  The mu database now lives under
  ~/.cache/mu rather than ~/.mu by default.  After upgrading,
  move the contents under ~/.mu to ~/.cache/mu.

20210823:
  AFFECTS: users of mail/postfixadmin
  AUTHOR: ports.maintainer@evilphi.com

  The 3.2->3.3 upgrade requires generating a new setup password hash.
  The normal post-upgrade visit to setup.php will walk you through the
  steps.

  For more information, see the "Version 3.3" section of the change log:
  https://github.com/postfixadmin/postfixadmin/blob/postfixadmin-3.3.9/CHANGELOG.TXT

20210818:
  AFFECTS: users of databases/redis
  AUTHOR: osa@FreeBSD.org

  The databases/redis port has been updated to the recent stable release.
  Users wanting to stay on v6.0 can replace databases/redis with
  databases/redis6 with one of the following commands:

  # pkg install databases/redis6
    or
  # portmaster -o databases/redis6 databases/redis
    or
  # portupgrade -o databases/redis6 databases/redis

20210805:
  AFFECTS: users of sysutils/beats7
  AUTHOR: otis@FreeBSD.org

  Beats may not be sending data to some distributions of Elasticsearch

  In this release, Elastic is enabling a licensing change that was broadly
  communicated earlier in 2021. This change would imply that 7.13 instances of
  Beats would fail to connect to 7.10 or earlier open source distributions of
  Elasticsearch and Kibana.

  The most visible effect is that sysutils/beats7 users can expect
  difficulties to send data to Elastic instances hosted in AWS.

  For more information, see:
  https://www.elastic.co/guide/en/beats/libbeat/current/breaking-changes-7.13.html

20210801:
  AFFECTS: users of OpenLDAP
  AUTHOR: delphij@FreeBSD.org

  SASL is now always enabled for OpenLDAP.

  If you use portmaster:
        portmaster -o net/openldap24-client openldap-sasl-client
  If you use portupgrade:
	portupgrade -fo net/openldap24-client openldap-sasl-client
  If you use pkg with binary packages:
        pkg set -o net/openldap24-sasl-client:net/openldap24-client

20210730:
  AFFECTS: users of multimedia/mlt, multimedia/mlt-qt and multimedia/py-mlt
  AUTHOR:  kde@FreeBSD.org

  multimedia/{py-,}mlt{-qt5,} has been moved to multimedia/{py-,}mlt6{-qt5,}
  to make room for importin the next major version of the mlt framework.

20210721:
  AFFECTS: users of x11/rxvt-unicode
  AUTHOR: thierry@FreeBSD.org

  Since 9.26, there is a regression in resource parsing, which no longer
  accepts a prefix of the form "URxvt*keysym" ("*." is equivalent to "*").

  Changing "*." to "." should make your bindings work again.

20210704:
  AFFECTS: users of misc/qtchooser
  AUTHOR: kde@FreeBSD.org

  QtChooser allows you to select your version of Qt among those installed.
  However, this tool is no longer supported upstream and will not be
  available for Qt6.

  By default, our Qt installations are done in:
  ${LOCALBASE}/lib/qt${QT_VERSION} as recommended.
  We have added symbolic linking for the main binaries to 
  ${LOCALBASE}/bin with the suffix -qt5.

20210628:
  AFFECTS: users of misc/openhab
  AUTHOR: netchild@FreeBSD.org

  You need to run
    sed -i -e 's:^karaf.framework.equinox=.*:karaf.framework.equinox=mvn\:org.eclipse.platform/org.eclipse.osgi/3.16.200: ; s:^karaf.framework.felix=.*:karaf.framework.felix=mvn\:org.apache.felix/org.apache.felix.framework/6.0.4:' /var/db/openhab/userdata/etc/config.properties
  to update the version numbers of some components in a config file.

20210621:
  AFFECTS: users of www/gitlab-ce
  AUTHOR: mfechner@FreeBSD.org

  The upgrade of Gitlab 14.0.0 is in preparation.
  You must upgrade first to 13.12.
  For more information see here:
  https://about.gitlab.com/blog/2021/06/04/gitlab-moving-to-14-breaking-changes/

  To do the upgrade, make sure you follow the upgrade manuals:
  https://gitlab.fechner.net/mfechner/Gitlab-docu/-/tree/master/update

  I will merge the 14.0.0 upgrade later to quarterly branch to give you
  some time for the upgrade to 13.12.

20210620:
  AFFECTS: users of misc/openhab2
  AUTHOR: netchild@FreeBSD.org

  The openhab v3 port has been committed. Upstream has removed the
  version from the name, as such the FreeBSD port follows in all places
  (start script name, directory names, ...).
  Users are encouraged to migrate from misc/openhab2 to misc/openhab.

  No automatic config migration is available Both versions can be
  installed in parallel, but an users has to take care to not run
  both at the same time on the same port.

20210617:
  AFFECTS: users of graphics/mesa-libs and x11/nvidia-driver
  AUTHOR: kbowling@FreeBSD.org

  Some libraries from mesa-libs are now provided by libglvnd while
  others were renamed. nvidia-driver already used libglvnd but bundled
  a copy which is now provided as a separate package. When building
  outside poudriere make sure to remove mesa-libs and nvidia-driver
  first in order to avoid conflict with libglvnd.

  For portmaster users:
  # pkg delete -f mesa-libs nvidia-driver
  # portmaster -a

  For portupgrade users:
  # pkg delete -f mesa-libs nvidia-driver
  # portupgrade -a

20210523:
  AFFECTS: users of www/tt-rss
  AUTHOR: dereks@lifeofadishwasher.com

  tt-rss config.php syntax has changed.  You can find detailed changes
  here https://tt-rss.org/wiki/GlobalConfig or look at config.php.sample.
  Expect your config.php to not work with newer www/tt-rss releases.

  Due to changes in ttrssd before updating you should stop ttrssd or
  otherwise kill the php process running update_daemon2.php.

20210516:
  AFFECTS: users of security/bitwarden_rs
  AUTHOR: mr@FreeBSD.org

  bitwarden_rs has been renamed to vaultwarden upstream.
  So switch to security/vaultwarden instead.

20210515:
  AFFECTS: users of databases/postgresql??-server
  AUTHOR: girgen@FreeBSD.org

  The rc.conf parameter for the login class of the postgresql daemon has
  changed name from postgresql_class to postgresql_login_class.
  rc.subr(8) states that the parameter should be named ${name}_login_class.

